#!/bin/sh

echo "Running pre-commit checks..."

# Run format check
echo "Running mix format..."
mix format --check-formatted
if [ $? -ne 0 ]; then
  echo "Code formatting failed! Please run 'mix format'"
  exit 1
fi

# Run credo
echo "Running mix credo..."
mix credo --strict
if [ $? -ne 0 ]; then
  echo "Credo checks failed!"
  exit 1
fi

# Check API sync
echo "Running API sync check..."
mix yog.sync
if [ $? -ne 0 ]; then
  echo "API sync checks failed!"
  exit 1
fi

# Run tests
echo "Running mix test..."
mix test
if [ $? -ne 0 ]; then
  echo "Tests failed!"
  exit 1
fi

echo "All pre-commit checks passed! âœ¨"
exit 0
